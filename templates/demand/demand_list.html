{% extends 'demand/base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block content %}
  <h1>{{ title }}</h1>
  <p><a href="{% url 'demand_add' %}"><span class="icon icon-plus"></span> Добавить требование</a></p>

  <table id="dataTable" class="table table-sm table-hover table-bordered">
    <thead class="thead-dark">
      <tr>
        <th></th>
        <th>Наименование</th>
        <th>Описание</th>
        <th>Статус</th>
      </tr>
    </thead>
    <tbody>
      {% for demand in demands %}
        <tr
        {% if demand.get_status_display == 'Завершён' %}
            class="table-success"
        {% elif demand.get_status_display == 'Отложен' %}
            class="table-primary"
        {% elif demand.get_status_display == 'В работе' %}
            class="table-warning"
        {% else %}
            class="table-light"
        {% endif %}
        >
          <td>
            <a href="{% url 'demand_edit' demand.id %}"><span class="icon icon-pencil"></span></a><br><br>
            <a href="{% url 'demand_del' demand.id %}" class="red"><span class="icon icon-trash"></span></a>
          </td>
          <td>
            {{ demand.title }}<br>
            {% for app in demand.for_apps.all %}
              <span class="badge badge-secondary">{{ app }}</span>
            {% endfor %}
          </td>
          <td>{{ demand.description }}</td>
          <td>{{ demand.get_status_display }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
